{% extends "base.html" %}
{% block content %}
<div class="card">
  <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px;">
    <h2 style="margin:0;color:var(--cyan);">Daily Global Leaderboard</h2>
    <div>
      <a class="btn" href="{{ url_for('home') }}">Modes</a>
      <a class="btn" href="{{ url_for('leaderboard') }}">All-Time</a>
    </div>
  </div>

  <form method="get" action="{{ url_for('daily_leaderboard') }}" style="margin-top:10px;">
    <label for="day">Choose day:</label>
    <select name="day" id="day" onchange="this.form.submit()"
            style="background:#0b0720;color:#eaffff;border:1px solid rgba(255,255,255,.2);border-radius:8px;padding:6px 10px;">
      {% for d in dates %}
        <option value="{{ d }}" {% if d == day %}selected{% endif %}>{{ d }}</option>
      {% endfor %}
    </select>
  </form>

  <p style="margin-top:8px;">Showing scores for <strong>{{ day }}</strong>. Everyone had the same grid per mode.</p>

  <div style="display:flex;gap:18px;flex-wrap:wrap;">
    {% for m in leaders.keys() %}
    <div style="flex:1 1 300px;">
      <h3 style="color:var(--cyan);margin:0 0 8px;">{{ m|capitalize }}</h3>
      <table class="leader" style="width:100%;">
        <thead>
          <tr><th>#</th><th>User</th><th>Score</th><th>Elapsed</th><th>Note</th><th>When</th></tr>
        </thead>
        <tbody>
        {% for row in leaders[m] %}
          <tr>
            <td>{{ loop.index }}</td>
            <td>{{ row['email'] }}</td>
            <td>{{ row['score'] }}</td>
            <td>{{ row['elapsed'] if row['elapsed'] else '-' }}</td>
            <td>{{ row['note'] }}</td>
            <td>{{ row['created_at'] }}</td>
          </tr>
        {% else %}
          <tr><td colspan="6" style="opacity:.7;">No entries yet.</td></tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}