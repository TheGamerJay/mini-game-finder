{% extends "base.html" %}
{% block content %}
<div class="card" style="max-width:460px;margin-inline:auto;">
  {% if request_mode %}
    <h2 style="margin:6px 0 12px;color:var(--cyan);">Reset Password</h2>
    {% if flash_msg %}<p class="{{ 'success' if flash_msg[0]=='ok' else 'alert' }}">{{ flash_msg[1] }}</p>{% endif %}
    <form method="post">
      <input type="email" name="email" placeholder="Email" required
             style="width:100%;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,.15);background:#0b0720;color:#eaffff;margin:6px 0;">
      <button class="btn" type="submit" style="width:100%;margin-top:10px;">Send reset link</button>
    </form>
    {% if dev_link %}
    <div class="success" style="margin-top:10px;">
      Dev mode: reset link → <a style="color:var(--cyan)" href="{{ dev_link }}">{{ dev_link }}</a>
    </div>
    {% endif %}
    <div style="margin-top:20px;">
      <a href="{{ url_for('login') }}" class="btn" style="display: inline-flex; align-items: center; gap: 8px;">
        ← Back to login
      </a>
    </div>
  {% else %}
    <h2 style="margin:6px 0 12px;color:var(--cyan);">Choose a new password</h2>
    {% if flash_msg %}<p class="{{ 'success' if flash_msg[0]=='ok' else 'alert' }}">{{ flash_msg[1] }}</p>{% endif %}
    <form method="post">
      <input type="password" name="password" placeholder="New password (min 6)" minlength="6" required
             style="width:100%;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,.15);background:#0b0720;color:#eaffff;margin:6px 0;">
      <button class="btn" type="submit" style="width:100%;margin-top:10px;">Update password</button>
    </form>
  {% endif %}
</div>
{% endblock %}