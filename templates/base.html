<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Mini Word Finder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  {% if csrf_token %}<meta name="csrf-token" content="{{ csrf_token }}">{% endif %}
  <link rel="icon" type="image/png" sizes="32x32" href="/static/images/TheLogo.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/static/images/TheLogo.png">
  <link rel="apple-touch-icon" href="/static/images/TheLogo.png">
  <link rel="shortcut icon" href="/static/images/TheLogo.png">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css', v=config.get('ASSET_VERSION')) }}">
</head>
<body data-authenticated="{% if current_user and current_user.is_authenticated %}true{% else %}false{% endif %}">
  <div class="nav">
    <a href="/" style="font-weight:700; color: white; text-decoration: none;">Mini Word Finder</a>
    <span style="flex:1"></span>
    {% if current_user and current_user.is_authenticated %}
      <a href="/store" class="btn auth-only" id="store-btn" style="background: rgba(255,255,255,0.1); text-decoration: none;">ðŸ’Ž Store</a>
      <a href="/profile" class="btn auth-only" style="background: rgba(255,255,255,0.1); text-decoration: none;">ðŸ§‘ Profile</a>
      <a href="/community" class="btn auth-only" style="background: rgba(255,255,255,0.1); text-decoration: none;">ðŸ‘¥ Community</a>
      <a href="/wallet" class="btn auth-only" style="background: rgba(255,255,255,0.1); text-decoration: none;">ðŸ’° Wallet: {{ current_user.mini_word_credits }} credits</a>
      <a href="/logout" class="btn auth-only" style="background:#374151">Logout</a>
    {% elif session.get('user_id') %}
      <a href="/logout" class="btn" style="background:#374151">Logout</a>
    {% endif %}
  </div>
  <div class="container">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="{% if category == 'error' %}alert{% else %}success{% endif %}">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}
    {% block content %}{% endblock %}
  </div>

  <!-- Footer with Terms and Privacy links -->
  <footer style="border-top: 1px solid #1f2937; padding: 20px 16px; text-align: center; color: rgba(229, 231, 235, 0.6); font-size: 0.85rem;">
    <div style="max-width: 1000px; margin: 0 auto; display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;">
      <a href="/terms" style="color: #93c5fd; text-decoration: none;">Terms of Service</a>
      <span style="color: rgba(229, 231, 235, 0.3);">|</span>
      <a href="/privacy" style="color: #93c5fd; text-decoration: none;">Privacy Policy</a>
      <span style="color: rgba(229, 231, 235, 0.3);">|</span>
      <span>Â© 2025 Mini Word Finder</span>
    </div>
  </footer>

  <!-- External JavaScript for CSP compliance -->
  <script defer src="{{ url_for('static', filename='js/auth-check.js', v=config.get('ASSET_VERSION')) }}"></script>
</body>
</html>