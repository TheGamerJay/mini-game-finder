{% extends "base.html" %}

{% block content %}
<div style="min-height:calc(100vh - 100px);display:flex;align-items:center;justify-content:center;">
  <div class="card" style="width:100%;max-width:460px;margin:20px;background:linear-gradient(135deg, #663399, #9966cc) !important;border:3px solid white;box-shadow:0 0 20px rgba(255,255,255,0.3);">
    <div class="brand" style="text-align:center;margin-bottom:24px;">
      <img src="{{ url_for('static', filename='images/TheLogo.png') }}" alt="Mini Word Finder Logo"
           style="width:320px;height:auto;margin-bottom:20px;transition:transform 0.3s ease;filter:drop-shadow(0 4px 8px rgba(0,0,0,0.1));">
      <h1 style="margin:0;font-size:32px;font-weight:700;background:linear-gradient(to right,white,var(--cyan));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;">
        Create Account
      </h1>
    </div>
    
    {% if flash_msg %}
    <p class="{{ 'success' if flash_msg[0]=='ok' else 'alert' }}" style="text-align:center;margin-bottom:20px;">
      {{ flash_msg[1] }}
    </p>
    {% endif %}
    
    <form method="post">
      <div style="margin-bottom:24px;">
        <label style="display:block;margin-bottom:8px;font-size:14px;color:var(--cyan);font-weight:500;">
          Username
        </label>
        <input name="username" type="text" required
               pattern="[A-Za-z0-9_]+" title="Letters, numbers and underscore only"
               placeholder="Choose a username"
               style="width:100%;padding:12px 16px;border:2px solid rgba(255,255,255,0.1);border-radius:12px;background:rgba(0,0,0,0.2);color:white;font-size:16px;transition:all 0.3s ease;box-sizing:border-box;">
      </div>
      
      <div style="margin-bottom:24px;">
        <label style="display:block;margin-bottom:8px;font-size:14px;color:var(--cyan);font-weight:500;">
          Display Name (optional)
        </label>
        <input name="display_name" type="text"
               placeholder="How you want to be known"
               style="width:100%;padding:12px 16px;border:2px solid rgba(255,255,255,0.1);border-radius:12px;background:rgba(0,0,0,0.2);color:white;font-size:16px;transition:all 0.3s ease;box-sizing:border-box;">
      </div>
      
      <div style="margin-bottom:24px;">
        <label style="display:block;margin-bottom:8px;font-size:14px;color:var(--cyan);font-weight:500;">
          Email address
        </label>
        <input name="email" type="email" required
               placeholder="Enter your email"
               style="width:100%;padding:12px 16px;border:2px solid rgba(255,255,255,0.1);border-radius:12px;background:rgba(0,0,0,0.2);color:white;font-size:16px;transition:all 0.3s ease;box-sizing:border-box;">
      </div>
      
      <div style="margin-bottom:24px;">
        <label style="display:block;margin-bottom:8px;font-size:14px;color:var(--cyan);font-weight:500;">
          Password
        </label>
        <div style="display:flex;gap:8px;align-items:center;">
          <input id="pw" name="password" type="password" required
                 placeholder="Choose a password"
                 style="flex:1;padding:12px 16px;border:2px solid rgba(255,255,255,0.1);border-radius:12px;background:rgba(0,0,0,0.2);color:white;font-size:16px;transition:all 0.3s ease;box-sizing:border-box;">
          <button type="button" class="btn-icon" aria-pressed="false" onclick="togglePw('pw', this)"
                  style="padding:12px;background:rgba(255,255,255,0.1);border:none;border-radius:12px;color:var(--cyan);cursor:pointer;transition:all 0.3s ease;">
            👁
          </button>
        </div>
      </div>
      
      <div style="margin-bottom:24px;">
        <label style="display:block;margin-bottom:8px;font-size:14px;color:var(--cyan);font-weight:500;">
          Confirm password
        </label>
        <div style="display:flex;gap:8px;align-items:center;">
          <input id="pw2" name="confirm_password" type="password" required
                 placeholder="Confirm your password"
                 style="flex:1;padding:12px 16px;border:2px solid rgba(255,255,255,0.1);border-radius:12px;background:rgba(0,0,0,0.2);color:white;font-size:16px;transition:all 0.3s ease;box-sizing:border-box;">
          <button type="button" class="btn-icon" aria-pressed="false" onclick="togglePw('pw2', this)"
                  style="padding:12px;background:rgba(255,255,255,0.1);border:none;border-radius:12px;color:var(--cyan);cursor:pointer;transition:all 0.3s ease;">
            👁
          </button>
        </div>
      </div>

      <!-- Terms Agreement Checkbox -->
      <div style="margin-bottom:24px;padding:16px;background:rgba(255,255,255,0.05);border-radius:12px;">
        <label style="display:flex;align-items:flex-start;gap:12px;cursor:pointer;font-size:14px;line-height:1.6;">
          <input type="checkbox" name="agree_terms" required
                 style="margin-top:2px;width:18px;height:18px;accent-color:var(--cyan);">
          <span style="color:rgba(255,255,255,0.9);">
            I have read and agree to the
            <a href="/terms" target="_blank" style="color:var(--cyan);text-decoration:underline;font-weight:500;">Terms of Service</a>
            and
            <a href="/privacy" target="_blank" style="color:var(--cyan);text-decoration:underline;font-weight:500;">Privacy Policy</a>
          </span>
        </label>
      </div>

      <div style="display:flex;gap:12px;margin-top:24px;">
        <button type="submit" class="btn" style="flex:1;">Create account</button>
        <a href="{{ url_for('core.login') }}" class="btn btn-secondary" style="flex:1;text-decoration:none;">
          Back to login
        </a>
      </div>
    </form>
  </div>
</div>

<script>
function togglePw(id, btn) {
  const i = document.getElementById(id);
  const show = i.type === 'password';
  i.type = show ? 'text' : 'password';
  btn.setAttribute('aria-pressed', show ? 'true' : 'false');
  btn.textContent = show ? '🙈' : '👁';
}
</script>
{% endblock %}
