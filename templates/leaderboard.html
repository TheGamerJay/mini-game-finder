{% extends "base.html" %}

{% block content %}
<div class="leaderboard-page">
    <!-- Hero Header with Gradient -->
    <div class="leaderboard-hero">
        <div class="container">
            <div class="leaderboard-hero-content">
                <div class="leaderboard-hero-text">
                    <h1 class="leaderboard-hero-title">üèÜ Leaderboards</h1>
                    <p class="leaderboard-hero-subtitle">Compete with the best players and climb to the top!</p>
                </div>
                <a href="/" class="btn btn-ghost">‚Üê Back to Game</a>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Navigation Tabs -->
        <div class="leaderboard-nav-tabs">
            <a href="/leaderboard" class="btn leaderboard-tab-active">
                üèÜ Puzzle Champions
            </a>
            <a href="/daily_leaderboard" class="btn leaderboard-tab">
                üìÖ Daily Rankings
            </a>
            <a href="/war-leaderboard" class="btn leaderboard-tab">
                ‚öîÔ∏è War Champions
            </a>
        </div>

        <div class="leaderboard-section-header">
            <h2 class="leaderboard-section-title">All-Time Best Performances</h2>
            <p class="leaderboard-section-desc">Top scores across all game modes</p>
        </div>

    <div class="leaderboard-grid">
        {% for m in leaders.keys() %}
        <div class="card leaderboard-mode-card">
            <h3 class="leaderboard-mode-title">{{ m|capitalize }} Mode</h3>
            <table class="leader leaderboard-table">
                <thead>
                    <tr class="leaderboard-table-header">
                        <th class="leaderboard-table-th">#</th>
                        <th class="leaderboard-table-th leaderboard-table-th-left">Player</th>
                        <th class="leaderboard-table-th">Score</th>
                        <th class="leaderboard-table-th">Time</th>
                        <th class="leaderboard-table-th">When</th>
                    </tr>
                </thead>
                <tbody>
                {% for row in leaders[m] %}
                    <tr class="leaderboard-table-row">
                        <td class="leaderboard-table-td leaderboard-rank {% if loop.index == 1 %}leaderboard-rank-1{% elif loop.index == 2 %}leaderboard-rank-2{% elif loop.index == 3 %}leaderboard-rank-3{% else %}leaderboard-rank-default{% endif %}">
                            {% if loop.index == 1 %}ü•á
                            {% elif loop.index == 2 %}ü•à
                            {% elif loop.index == 3 %}ü•â
                            {% else %}{{ loop.index }}
                            {% endif %}
                        </td>
                        <td class="leaderboard-table-td leaderboard-table-td-left leaderboard-player-name">{{ row['email'] }}</td>
                        <td class="leaderboard-table-td leaderboard-score">{{ row['score'] }}</td>
                        <td class="leaderboard-table-td leaderboard-time">{{ row['elapsed'] if row['elapsed'] else '-' }}</td>
                        <td class="leaderboard-table-td leaderboard-date">{{ row['created_at'] }}</td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="5" class="leaderboard-no-entries">
                            No entries yet. Be the first!
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
        {% endfor %}
    </div>

    <!-- War Champions Quick View -->
    <div class="card war-champions-card">
        <div class="war-champions-header">
            <h3 class="war-champions-title">‚öîÔ∏è Top War Champions</h3>
            <a href="/war-leaderboard" class="btn war-champions-btn">View Full Rankings</a>
        </div>

        <div id="topWarChampions" class="war-champion-preview">
            <!-- Top war champions will be loaded here -->
        </div>
    </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/leaderboard.js') }}"></script>
{% endblock %}